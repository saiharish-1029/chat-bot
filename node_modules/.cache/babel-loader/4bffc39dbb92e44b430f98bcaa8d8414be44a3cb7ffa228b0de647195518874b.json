{"ast":null,"code":"import{useEffect,useState}from\"react\";const useRecorder=()=>{const[audioURL,setAudioURL]=useState(\"\");const[audio,setAudio]=useState(null);const[isRecording,setIsRecording]=useState(false);const[recorder,setRecorder]=useState(null);useEffect(()=>{// Lazily obtain recorder first time we're recording.\nif(recorder===null){if(isRecording){requestRecorder().then(setRecorder,console.error);}return;}// Manage recorder state.\nif(isRecording){recorder.start();}else{recorder.stop();}// Obtain the audio when ready.\nconst handleData=e=>{setAudio(e);setAudioURL(URL.createObjectURL(e.data));console.log(audioURL,audio);};recorder.addEventListener(\"dataavailable\",handleData);return()=>recorder.removeEventListener(\"dataavailable\",handleData);},[recorder,isRecording]);const startRecording=()=>{setIsRecording(true);};const stopRecording=()=>{setIsRecording(false);};return[audioURL,isRecording,startRecording,stopRecording,audio];};async function requestRecorder(){const stream=await navigator.mediaDevices.getUserMedia({audio:true});return new MediaRecorder(stream);}export default useRecorder;","map":{"version":3,"names":["useEffect","useState","useRecorder","audioURL","setAudioURL","audio","setAudio","isRecording","setIsRecording","recorder","setRecorder","requestRecorder","then","console","error","start","stop","handleData","e","URL","createObjectURL","data","log","addEventListener","removeEventListener","startRecording","stopRecording","stream","navigator","mediaDevices","getUserMedia","MediaRecorder"],"sources":["/workspace/chat-bot/src/useRecorder.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst useRecorder = () => {\n    const [audioURL, setAudioURL] = useState(\"\");\n    const [audio, setAudio] = useState(null);\n    const [isRecording, setIsRecording] = useState(false);\n    const [recorder, setRecorder] = useState(null);\n\n    useEffect(() => {\n        // Lazily obtain recorder first time we're recording.\n        if (recorder === null) {\n            if (isRecording) {\n                requestRecorder().then(setRecorder, console.error);\n            }\n            return;\n        }\n\n        // Manage recorder state.\n        if (isRecording) {\n            recorder.start();\n        } else {\n            recorder.stop();\n        }\n\n        // Obtain the audio when ready.\n        const handleData = e => {\n            setAudio(e);\n            setAudioURL(URL.createObjectURL(e.data));\n            console.log(audioURL, audio)\n        };\n\n        recorder.addEventListener(\"dataavailable\", handleData);\n        return () => recorder.removeEventListener(\"dataavailable\", handleData);\n    }, [recorder, isRecording]);\n\n    const startRecording = () => {\n        setIsRecording(true);\n    };\n\n    const stopRecording = () => {\n        setIsRecording(false);\n    };\n\n    return [audioURL, isRecording, startRecording, stopRecording, audio];\n};\n\nasync function requestRecorder() {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    return new MediaRecorder(stream);\n}\nexport default useRecorder;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE3C,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGH,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACI,KAAK,CAAEC,QAAQ,CAAC,CAAGL,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACM,WAAW,CAAEC,cAAc,CAAC,CAAGP,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACQ,QAAQ,CAAEC,WAAW,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAE9CD,SAAS,CAAC,IAAM,CACZ;AACA,GAAIS,QAAQ,GAAK,IAAI,CAAE,CACnB,GAAIF,WAAW,CAAE,CACbI,eAAe,CAAC,CAAC,CAACC,IAAI,CAACF,WAAW,CAAEG,OAAO,CAACC,KAAK,CAAC,CACtD,CACA,OACJ,CAEA;AACA,GAAIP,WAAW,CAAE,CACbE,QAAQ,CAACM,KAAK,CAAC,CAAC,CACpB,CAAC,IAAM,CACHN,QAAQ,CAACO,IAAI,CAAC,CAAC,CACnB,CAEA;AACA,KAAM,CAAAC,UAAU,CAAGC,CAAC,EAAI,CACpBZ,QAAQ,CAACY,CAAC,CAAC,CACXd,WAAW,CAACe,GAAG,CAACC,eAAe,CAACF,CAAC,CAACG,IAAI,CAAC,CAAC,CACxCR,OAAO,CAACS,GAAG,CAACnB,QAAQ,CAAEE,KAAK,CAAC,CAChC,CAAC,CAEDI,QAAQ,CAACc,gBAAgB,CAAC,eAAe,CAAEN,UAAU,CAAC,CACtD,MAAO,IAAMR,QAAQ,CAACe,mBAAmB,CAAC,eAAe,CAAEP,UAAU,CAAC,CAC1E,CAAC,CAAE,CAACR,QAAQ,CAAEF,WAAW,CAAC,CAAC,CAE3B,KAAM,CAAAkB,cAAc,CAAGA,CAAA,GAAM,CACzBjB,cAAc,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAAkB,aAAa,CAAGA,CAAA,GAAM,CACxBlB,cAAc,CAAC,KAAK,CAAC,CACzB,CAAC,CAED,MAAO,CAACL,QAAQ,CAAEI,WAAW,CAAEkB,cAAc,CAAEC,aAAa,CAAErB,KAAK,CAAC,CACxE,CAAC,CAED,cAAe,CAAAM,eAAeA,CAAA,CAAG,CAC7B,KAAM,CAAAgB,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEzB,KAAK,CAAE,IAAK,CAAC,CAAC,CACzE,MAAO,IAAI,CAAA0B,aAAa,CAACJ,MAAM,CAAC,CACpC,CACA,cAAe,CAAAzB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}